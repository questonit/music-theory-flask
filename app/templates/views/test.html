{% extends "base.html" %}

{% block app_content %}
<div class="container d-flex flex-column align-items-center questions">
    <h3 class="h3 mt-3 mb-3 fw-normal text-center">{{ test.name }}</h3>

    {% for question in test.question_array %}
    <div class="question form-question form-question-disabled">
        <form>
            <fieldset disabled>
                <div class="mb-3">
                    <label for="question_text" class="form-label">Текст вопроса</label>
                    <input type="email" class="form-control" id="question_text" name="question_text"
                        value="{{ question.question_text }}">
                </div>

                <div class="mb-3">
                    <label for="attachment_url" class="form-label">Ссылка на вложение (например, изображение)</label>
                    <input type="email" class="form-control" id="attachment_url" name="attachment_url"
                        value="{{ question.attachment_url }}">
                </div>

                <label class="form-label">Ответы</label>
                <div class="form-answers" id="answers">
                    {% set count = question.generation_seed.count %}
                    {% for answer in question.answer_array %}
                    <div class="input-group mb-3">
                        <div class="input-group-text">
                            {% if loop.index0 < count %} <input class="form-check-input mt-0" type="checkbox" value=""
                                aria-label="Верный" checked>
                                {% else %}
                                <input class="form-check-input mt-0" type="checkbox" value="" aria-label="Верный">
                                {% endif %}
                        </div>
                        <input type="text" class="form-control" aria-label="Вопрос" value="{{ answer }}">
                    </div>
                    {% endfor %}

                </div>
            </fieldset>
            <div class="d-grid gap-2 d-md-flex justify-content-md-between">
                <button class="btn btn-navy" type="button" disabled>Сохранить</button>
                <button class="btn btn-orange" type="button">Редактировать</button>
            </div>
        </form>

    </div>
    {% endfor %}

    <div class="question_example form-question" hidden>
        <form>
            <fieldset>
                <div class="mb-3">
                    <label for="question_text" class="form-label">Текст вопроса</label>
                    <input type="email" class="form-control" id="question_text" name="question_text">
                </div>

                <div class="mb-3">
                    <label for="attachment_url" class="form-label">Ссылка на вложение (например, изображение)</label>
                    <input type="email" class="form-control" id="attachment_url" name="attachment_url">
                </div>

                <label class="form-label">Ответы</label>
                <div class="form-answers" id="answers">
                    <div class="input-group mb-3">
                        <div class="input-group-text">
                            <input class="form-check-input mt-0" type="checkbox" value="" aria-label="Верный">
                        </div>
                        <input type="text" class="form-control" aria-label="Вопрос">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-text">
                            <input class="form-check-input mt-0" type="checkbox" value="" aria-label="Верный">
                        </div>
                        <input type="text" class="form-control" aria-label="Вопрос">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-text">
                            <input class="form-check-input mt-0" type="checkbox" value="" aria-label="Верный">
                        </div>
                        <input type="text" class="form-control" aria-label="Вопрос">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-text">
                            <input class="form-check-input mt-0" type="checkbox" value="" aria-label="Верный">
                        </div>
                        <input type="text" class="form-control" aria-label="Вопрос">
                    </div>
                </div>
            </fieldset>
            <div class="d-grid gap-2 d-md-flex justify-content-md-between">
                <button class="btn btn-navy btn-save-question" type="button">Сохранить</button>
                <button class="btn btn-orange btn-edit-question" type="button" disabled>Редактировать</button>
            </div>
        </form>
    </div>

</div>
<div class="container d-grid gap-2 d-md-flex justify-content-md-start" style="width:70%">
    <button class="btn btn-outline-navy js-add-question" type="button">Добавить вопрос</button>
</div>
{% endblock %}

{% block scripts%}
<script>
    // кнопка добавления
    var button_add = document.querySelector('.js-add-question');
    button_add.addEventListener("click", function () {
        var questions = document.querySelector('.questions');
        var form_question = document.querySelector('.question_example').cloneNode(true);
        form_question.classList.add('question');
        form_question.classList.remove('question_example');
        form_question.hidden = false;
        questions.appendChild(form_question);
    })

    // кнопка редактирования
</script>

{% endblock %}